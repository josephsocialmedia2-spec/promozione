<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Agenda Operativa ‚Äì Agente Immobiliare</title>
  <style>
    :root{
      --bg:#0b0f14;
      --card:#121a23;
      --muted:#8aa0b6;
      --text:#e8f0f7;
      --line:#223142;
      --accent:#ff7a18;
      --green:#1fbf75;
      --blue:#4b7bec;
      --red:#ff5c5c;
      --purple:#a55eea;
      --shadow: 0 14px 40px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 800px at 20% -10%, rgba(255,122,24,.18), transparent 55%),
                  radial-gradient(900px 700px at 110% 10%, rgba(31,191,117,.14), transparent 50%),
                  var(--bg);
      color: var(--text);
      padding: 22px;
    }
    header{
      max-width: 1100px;
      margin: 0 auto 18px auto;
      display:flex;
      gap:14px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .title{display:flex;flex-direction:column;gap:6px;}
    h1{font-size:20px;margin:0;letter-spacing:.2px;}
    .sub{color:var(--muted);font-size:13px;line-height:1.35;max-width:720px;}
    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end;}
    .chip{
      border:1px solid var(--line);
      background: rgba(18,26,35,.65);
      color: var(--text);
      padding: 9px 10px;
      border-radius: 999px;
      font-size: 13px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    input[type="search"]{
      border:1px solid var(--line);
      background: rgba(18,26,35,.65);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 999px;
      outline:none;
      width: 260px;
    }
    input[type="search"]::placeholder{color:#6f879f}
    button{
      border:1px solid var(--line);
      background: rgba(18,26,35,.65);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 999px;
      cursor:pointer;
    }
    button:hover{border-color:#35506a}
    main{
      max-width: 1100px;
      margin: 0 auto;
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }
    .grid{
      border:1px solid var(--line);
      background: rgba(18,26,35,.55);
      border-radius: var(--radius);
      overflow:hidden;
      box-shadow: var(--shadow);
    }
    .gridHead{
      display:grid;
      grid-template-columns: 92px 1fr;
      gap:0;
      padding: 12px 14px;
      border-bottom:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.03), transparent);
      align-items:center;
    }
    .gridHead .left{color: var(--muted); font-size:12px}
    .gridHead .right{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .legend{
      display:flex; gap:10px; flex-wrap:wrap;
      color: var(--muted); font-size:12px;
    }
    .dot{width:10px;height:10px;border-radius:999px;display:inline-block;margin-right:6px}
    .rows{display:flex;flex-direction:column;}
    .row{
      display:grid;
      grid-template-columns: 92px 1fr;
      gap:0;
      border-top:1px solid rgba(34,49,66,.45);
      min-height: 64px;
    }
    .time{
      padding: 12px 14px;
      color: var(--muted);
      font-size: 13px;
      border-right:1px solid rgba(34,49,66,.45);
      display:flex;
      align-items:center;
      justify-content:flex-start;
    }
    .slot{
      padding: 10px 12px;
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .block{
      flex: 1 1 520px;
      border:1px solid rgba(255,255,255,.07);
      border-left: 6px solid var(--accent);
      background: rgba(11,15,20,.55);
      border-radius: 12px;
      padding: 10px 12px;
      cursor:pointer;
      transition: transform .08s ease, border-color .08s ease;
      position:relative;
      overflow:hidden;
    }
    .block:hover{transform: translateY(-1px);border-color: rgba(255,255,255,.14);}
    .blockTitle{
      font-weight: 650;
      font-size: 14px;
      margin:0 0 4px 0;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .blockMeta{color: var(--muted);font-size: 12px;display:flex;gap:10px;flex-wrap:wrap;}
    .tag{
      border:1px solid rgba(255,255,255,.08);
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 12px;
      color: #cfe1f3;
      background: rgba(18,26,35,.6);
    }
    .small{font-size: 12px;color: var(--muted);}

    /* Modal */
    .modalBackdrop{
      position: fixed;
      inset:0;
      background: rgba(0,0,0,.58);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 50;
    }
    .modal{
      width: min(920px, 100%);
      max-height: 90vh;
      overflow:auto;
      background: rgba(18,26,35,.92);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 18px;
      box-shadow: 0 30px 80px rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
    }
    .modalHeader{
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
    }
    .modalHeader h2{margin:0;font-size:16px;line-height:1.25;}
    .modalHeader .meta{
      margin-top: 6px;
      color: var(--muted);
      font-size: 12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .closeBtn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(11,15,20,.55);
      color: var(--text);
      padding: 8px 10px;
      border-radius: 999px;
      cursor:pointer;
      white-space:nowrap;
    }
    .modalBody{padding: 14px 16px 16px 16px;display:grid;gap:12px;}
    .panel{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(11,15,20,.35);
      border-radius: 14px;
      padding: 12px 12px;
    }
    .panel h3{
      margin:0 0 8px 0;
      font-size: 13px;
      letter-spacing: .2px;
      text-transform: uppercase;
      color: #d7e8f8;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .panel ul{
      margin:0;
      padding-left: 18px;
      color: #d9e7f4;
      line-height:1.55;
      font-size: 14px;
    }
    .panel pre{
      margin:0;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.10);
      overflow:auto;
      font-size: 13px;
      line-height: 1.45;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .twoCol{display:grid;grid-template-columns: 1fr 1fr;gap:12px;}
    @media (max-width: 820px){
      .twoCol{grid-template-columns: 1fr}
      input[type="search"]{width: 100%}
    }
  </style>
</head>
<body>
  <header>
    <div class="title">
      <h1>Agenda Operativa Interattiva</h1>
      <div class="sub">
        Clicca su un blocco per aprire il <b>POP-UP operativo</b> (cosa fare, cosa dire, materiali, mindset, errori da evitare).
        Usa la ricerca per trovare al volo ‚ÄúOpen House‚Äù, ‚ÄúWhatsApp‚Äù, ‚Äúscript‚Äù, ecc.
      </div>
    </div>
    <div class="controls">
      <input id="search" type="search" placeholder="Cerca (es. 'script', 'open', 'whatsapp')">
      <button id="expandAll" title="Apri tutti i blocchi (in sequenza)">Apri sequenza</button>
      <span class="chip" title="Parole chiave da tenere a mente">
        üîë NOME ‚Ä¢ ZONA ‚Ä¢ OPEN ‚Ä¢ AIUTO ‚Ä¢ GRAZIE
      </span>
    </div>
  </header>

  <main>
    <section class="grid" aria-label="Agenda giornaliera">
      <div class="gridHead">
        <div class="left">ORARIO</div>
        <div class="right">
          <div class="small">Metodo: coltivatore (relazioni) ‚Üí risultati nel medio-lungo</div>
          <div class="legend">
            <span><span class="dot" style="background:var(--accent)"></span>Operativo</span>
            <span><span class="dot" style="background:var(--green)"></span>Territorio/Relazioni</span>
            <span><span class="dot" style="background:var(--blue)"></span>Gestione/CRM</span>
            <span><span class="dot" style="background:var(--red)"></span>Urgenze</span>
            <span><span class="dot" style="background:var(--purple)"></span>Pianificazione</span>
          </div>
        </div>
      </div>
      <div class="rows" id="rows"></div>
    </section>
  </main>

  <!-- Modal -->
  <div class="modalBackdrop" id="backdrop" role="dialog" aria-modal="true" aria-label="Dettagli attivita'">
    <div class="modal">
      <div class="modalHeader">
        <div>
          <h2 id="mTitle">Titolo</h2>
          <div class="meta" id="mMeta"></div>
        </div>
        <button class="closeBtn" id="closeBtn">Chiudi ‚úï</button>
      </div>
      <div class="modalBody">
        <div class="twoCol">
          <div class="panel">
            <h3>‚úÖ Cosa fare</h3>
            <ul id="mDo"></ul>
          </div>
          <div class="panel">
            <h3>üéØ Obiettivo</h3>
            <ul id="mGoal"></ul>
          </div>
        </div>

        <div class="twoCol">
          <div class="panel">
            <h3>üó£Ô∏è Cosa dire (script)</h3>
            <pre id="mSay"></pre>
          </div>
          <div class="panel">
            <h3>üß† Come muoverti (mindset)</h3>
            <ul id="mMind"></ul>
          </div>
        </div>

        <div class="twoCol">
          <div class="panel">
            <h3>üß∞ Cosa preparare (materiali)</h3>
            <ul id="mPrep"></ul>
          </div>
          <div class="panel">
            <h3>‚õî Errori da evitare</h3>
            <ul id="mAvoid"></ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Programma UNIFICATO: OFFLINE + ONLINE nello stesso schedule.
    // IMPORTANTISSIMO: usare virgolette normali (") o backtick (`) e NON le smart quotes (‚Äú ‚Äù).

    const schedule = [
      {
        time: "08:00",
        color: "var(--accent)",
        title: "üß† MINDSET ‚Äì Coltivatore, non cacciatore",
        tags: ["Mindset", "Costanza", "Reciprocita'"],
        meta: "Avvio giornata",
        do: [
          "Respira 2 minuti (calma ‚Üí lucidita').",
          "Scrivi 3 micro-obiettivi: 1 nuova relazione, 3 follow-up, 1 valore condiviso.",
          "Ripeti parole chiave: NOME ‚Äì ZONA ‚Äì OPEN ‚Äì AIUTO ‚Äì GRAZIE."
        ],
        say: `Mantra (30s):
"Costruisco relazioni, non inseguo vendite.
Oggi semino fiducia e valore.
Mi faccio ricordare per chiarezza e gentilezza."`,
        mind: [
          "Obiettivo: essere ricordato, non convincere.",
          "Curiosita' vera: fai domande, ascolta davvero.",
          "Ogni interazione deve lasciare una sensazione positiva."
        ],
        prep: [
          "Biglietti da visita (sempre).",
          "Volantino/Open House sul telefono + 3 copie cartacee.",
          "Note/CRM pronti per segnare nomi e dettagli."
        ],
        avoid: [
          "Partire in modalita' \"caccia\".",
          "Fare 20 chiacchiere senza follow-up.",
          "Saltare la preparazione perche' \"tanto so cosa dire\"."
        ],
        goal: ["Entrare in modalita' professionista centrato e costante."]
      },

      {
        time: "08:30",
        color: "var(--accent)",
        title: "üé≠ ROLE PLAY ‚Äì Script breve (naturale, non pushy)",
        tags: ["Script", "Allenamento", "Obiezioni"],
        meta: "Voce alta, 10 minuti",
        do: [
          "Simula 5 conversazioni complete (inizio ‚Üí valore ‚Üí invito ‚Üí uscita).",
          "Allenati su obiezioni: \"non mi interessa\", \"non conosco nessuno\", \"non ho tempo\".",
          "Regola: 1 frase su cosa fai + 1 domanda su di loro."
        ],
        say: `Script 15 secondi:
"Piacere, io aiuto persone che stanno pensando di vendere o comprare casa in zona a farlo senza stress e senza sorprese.
Tu di cosa ti occupi?"

Chiusura (soft):
"Se ti capita qualcuno con dubbi su vendita/valutazione, anche solo per orientarsi, gli do volentieri una mano."`,
        mind: [
          "Breve = autorevole. Troppo lungo = vendita.",
          "Sorriso + postura aperta.",
          "Chiudi bene e vai via: non restare appiccicato."
        ],
        prep: [
          "2 varianti script (formale / super semplice).",
          "Frase \"chi aiuto\" pronta.",
          "Memo vocale per riascoltarti 1 volta."
        ],
        avoid: [
          "Chiedere subito: \"Vuoi vendere?\"",
          "Parlare di commissioni/sconti.",
          "Spiegoni tecnici (la gente non te li ha chiesti)."
        ],
        goal: ["Avere uno script ripetibile senza pensarci."]
      },

      {
        time: "09:00‚Äì10:30",
        color: "var(--green)",
        title: "ü§ù OFFLINE ‚Äì Gruppi & networking (variegati)",
        tags: ["Networking", "Gruppi", "Relazioni"],
        meta: "Semina intelligente",
        do: [
          "Iscriviti/contatta 3‚Äì5 gruppi NON immobiliari (imprenditori, manager, hobby, sport, genitori, associazioni).",
          "Obiettivo evento: 5 conversazioni vere + 2 scambi contatto.",
          "Annota subito: nome + contesto + dettaglio personale + \"aggancio\"."
        ],
        say: `Apertura:
"Piacere, io lavoro nel settore immobiliare qui in zona: aiuto le persone a muoversi bene, senza stress.
Tu cosa fai?"

Chiusura:
"Ti va se ci scambiamo il contatto? Se ti capita qualcuno con dubbi su casa/valutazione, lo aiuto volentieri."`,
        mind: [
          "Non sei un agente segreto: sii visibile con naturalezza.",
          "Prima fai domande, poi parli di te.",
          "Scopo: relazione ‚Üí fiducia ‚Üí opportunita' (non oggi, ma presto)."
        ],
        prep: [
          "Biglietti da visita.",
          "Note app (nome + 3 parole chiave).",
          "Mini lista dei gruppi/eventi della settimana."
        ],
        avoid: [
          "Parlare solo di case e prezzi.",
          "Chiedere subito: \"Conosci qualcuno che vende?\"",
          "Non segnare i nomi (poi spariscono)."
        ],
        goal: ["Aumentare rete \"fredda\" che diventa rete \"calda\"."]
      },

      {
        time: "10:30‚Äì12:00",
        color: "var(--green)",
        title: "üìç OFFLINE ‚Äì Eventi target (scuola/figli/club/territorio)",
        tags: ["Eventi", "Target", "Visibilita'"],
        meta: "Fatti ricordare",
        do: [
          "Vai dove il tuo target e' gia' presente (scuola, palestra, club, quartiere, eventi business locali).",
          "Dichiara cosa fai in modo leggero (1 frase).",
          "Follow-up entro 24‚Äì48h con messaggio personale."
        ],
        say: `Frase naturale:
"S√¨, lavoro nell'immobiliare qui in zona. In questo periodo sto aiutando diverse famiglie a capire tempi e prezzi reali, senza impegno."

Follow-up (WhatsApp):
"Ciao [Nome], piacere di ieri üôÇ 
Se ti fa comodo, ogni mese mando 1 aggiornamento utile sul mercato (zero spam). Vuoi che ti inserisca?"`,
        mind: [
          "Tono leggero, zero pressione.",
          "Il follow-up e' dove vinci: 80% entro 48 ore.",
          "Se ti ricordano, ti chiamano."
        ],
        prep: [
          "Biglietti da visita.",
          "1 nota personalizzata da citare nel follow-up.",
          "Consenso prima di inserire in broadcast."
        ],
        avoid: [
          "Essere invisibile.",
          "Fare follow-up generico tipo \"piacere\" senza contesto.",
          "Aggiungere in lista senza consenso."
        ],
        goal: ["Trasformare contatti in conversazioni 1:1."]
      },

      {
        time: "12:00",
        color: "var(--blue)",
        title: "üìä CRM ‚Äì File clienti + COI con rating (A/B/C)",
        tags: ["CRM", "Rating", "Follow-up"],
        meta: "Capitale relazionale",
        do: [
          "Aggiorna file clienti passati + centri di influenza (COI).",
          "Campi minimi: Nome, telefono, email, indirizzo, compleanno, provenienza, note personali.",
          "Rating: A (top), B (medio), C (basso) + \"referenze inviate\".",
          "Imposta \"ultimo contatto\" e \"prossimo contatto\" (automatico o manuale)."
        ],
        say: `Messaggio valore (semplice):
"Ciao [Nome]! Ti giro un'informazione utile su [tema] che in zona sta incidendo parecchio.
Se vuoi, te la spiego in 2 minuti sul tuo caso."`,
        mind: [
          "Il ROI migliore e' su chi gia' ti conosce.",
          "Note personali = follow-up caldi e umani.",
          "A rating alto ‚Üí contatto piu' frequente."
        ],
        prep: [
          "Template CRM (A/B/C).",
          "Frequenze: A ogni 30‚Äì45 gg, B ogni 60‚Äì90 gg, C 2‚Äì3 volte/anno + broadcast mensile."
        ],
        avoid: [
          "\"Lo aggiorno quando ho tempo\".",
          "Ricontatti senza valore (solo \"come va?\").",
          "Nessuna traccia ‚Üí perdi opportunita'."
        ],
        goal: ["Sistema che ti dice chi contattare e quando."]
      },

      {
        time: "12:30",
        color: "var(--blue)",
        title: "üóÇ BACK OFFICE ‚Äì Ordine & documenti (zero distrazioni)",
        tags: ["Back office", "Ordine"],
        meta: "Pulizia operativa",
        do: [
          "Email necessarie e solo quelle.",
          "Documenti pratiche e aggiornamenti immobili.",
          "Aggiorna note appuntamenti/immobili nel CRM."
        ],
        say: "Regola: qui non si vende. Qui si mette ordine.",
        mind: ["Ritmo veloce, checklist, zero multitasking."],
        prep: ["Cartella documenti, checklist pratiche, accesso CRM."],
        avoid: ["Aprire attivita' commerciali in questo blocco.", "Scroll/social."],
        goal: ["Liberare spazio mentale e ridurre attriti."]
      },

      {
        time: "13:00‚Äì14:00",
        color: "var(--purple)",
        title: "üçΩ PAUSA ‚Äì Recupero energie (anche networking soft)",
        tags: ["Recupero", "Social"],
        meta: "Stacca davvero",
        do: [
          "Mangia senza schermo almeno 15 minuti.",
          "Passeggiata breve o reset mentale.",
          "Se sei in contesto sociale: micro-networking naturale."
        ],
        say: "Se capita: \"S√¨, faccio l'agente immobiliare. In che zona sei?\" (senza push).",
        mind: ["Ricarica = performance pomeriggio."],
        prep: ["Acqua, snack semplice, scarpe comode."],
        avoid: ["Saltare pausa e arrivare scarico.", "Scroll infinito."],
        goal: ["Tornare lucido e presente."]
      },

      {
        time: "14:00",
        color: "var(--green)",
        title: "üìç TERRITORIO ‚Äì Presenza & visibilita' (non essere invisibile)",
        tags: ["Relazioni", "Zona", "Brand personale"],
        meta: "Fatti vedere",
        do: [
          "Giro mirato in zona: bar, negozi, portieri, punti di aggregazione.",
          "1 frase chiara su cosa fai + 1 domanda su di loro.",
          "Consegna biglietto solo quando ha senso (interesse reale)."
        ],
        say: `1 frase:
"Io mi occupo di compravendite qui in zona: aiuto le persone a muoversi bene, senza stress."

Chiusura:
"Se ti serve una mano o conosci qualcuno in fase di cambio casa, fammi sapere."`,
        mind: [
          "Tono leggero, niente pressione.",
          "Obiettivo: riconoscibilita' + affidabilita'."
        ],
        prep: ["Biglietti, note, eventuale mini-materiale di zona."],
        avoid: ["Vendere invece di creare relazione.", "Monologhi."],
        goal: ["Aumentare la tua presenza percepita in zona."]
      },

      {
        time: "15:00",
        color: "var(--red)",
        title: "‚ö† BUFFER ‚Äì Urgenze vere + conferme appuntamenti",
        tags: ["Urgenze", "Sblocco"],
        meta: "Buffer intelligente",
        do: [
          "Gestisci urgenze vere (non procrastinazioni).",
          "Conferma appuntamenti con messaggio/telefonata breve.",
          "Ripulisci inbox/CRM 15 minuti."
        ],
        say: "Conferma: \"Ciao [Nome], confermo per [giorno] alle [ora]. Ti va bene?\"",
        mind: ["Calma e priorita': prima cio' che sblocca."],
        prep: ["Lista priorita', numeri rapidi, template messaggi."],
        avoid: ["Riempire il buffer di cose inutili.", "Perdere focus."],
        goal: ["Togliere attriti dal resto della giornata."]
      },

      {
        time: "16:00",
        color: "var(--blue)",
        title: "üß© PREQUALIFICA ‚Äì Arriva pronto (budget/tempi/motivazione)",
        tags: ["Qualifica", "Preparazione"],
        meta: "Conversione piu' alta",
        do: [
          "Pre-qualifica: budget, tempi, motivazione, vincoli.",
          "Prepara pacchetto appuntamento: comparabili, punti forza, prossimi step.",
          "Definisci 3 domande chiave e 1 proposta chiara."
        ],
        say: `Domande:
1) "Tempistiche realistiche?"
2) "Motivo del cambio?"
3) "Cosa NON e' negoziabile per voi?"

Chiusura:
"Perfetto: prossimo step e' [X] entro [data]."`,
        mind: ["Professionalita' = chiarezza. Meno improvvisazione."],
        prep: ["Scheda cliente, comparabili, checklist documenti."],
        avoid: ["Arrivare 'a braccio'.", "Non chiarire tempi e vincoli."],
        goal: ["Aumentare fiducia e conversione negli appuntamenti."]
      },

      {
        time: "17:30‚Äì18:45",
        color: "var(--green)",
        title: "ü§ù APPUNTAMENTI ‚Äì Relazione ‚Üí fiducia ‚Üí prossimi step",
        tags: ["Incontri", "Fiducia"],
        meta: "Ascolto attivo",
        do: [
          "Apri con 2 minuti di relazione (non vendita).",
          "Ascolta, prendi note, riassumi cio' che hai capito.",
          "Chiudi con prossimi step chiari e scritti."
        ],
        say: `Struttura:
- "Mi racconti la situazione?"
- "Se ho capito bene, per voi e' importante ___ e ___."
- "Prossimo step: ___ entro ___."`,
        mind: ["Niente pressione. Chiarezza e cura."],
        prep: ["Materiali, note cliente, checklist documenti."],
        avoid: ["Parlare troppo.", "Saltare i prossimi step."],
        goal: ["Farli sentire capiti e guidati."]
      },

      {
        time: "18:45",
        color: "var(--purple)",
        title: "üìù REVIEW ‚Äì Follow-up + piano domani",
        tags: ["Review", "Piano"],
        meta: "Crescita continua",
        do: [
          "Segna 1 cosa che ha funzionato oggi (replicala).",
          "Scrivi 3 follow-up da fare domani (entro 48h).",
          "Pianifica 1 azione networking concreta (gruppo/evento)."
        ],
        say: "Domani vinco se: faccio follow-up + semino 1 nuova relazione.",
        mind: ["Costanza batte intensita' casuale."],
        prep: ["Lista follow-up, calendario, mini-obiettivi."],
        avoid: ["Finire senza piano.", "Sottovalutare i follow-up."],
        goal: ["Chiudere la giornata con direzione chiara."]
      },

      {
        time: "Mensile",
        color: "var(--accent)",
        title: "üì≤ ONLINE ‚Äì WhatsApp Broadcast (newsletter di valore)",
        tags: ["WhatsApp", "Valore", "No spam"],
        meta: "1 volta al mese",
        do: [
          "Invia 1 contenuto utile (tassi mutui/surroga/trend zona/bonus).",
          "Formato: 8‚Äì10 righe max + 1‚Äì3 link cliccabili.",
          "Chiudi con domanda soft: \"Vuoi che ti dica come impatta su di te?\"",
          "Se in lista hai professionisti: dai business prima di chiedere."
        ],
        say: `Template broadcast:
"Aggiornamento rapido [Mese] (1 min):
1) Dato: ___
2) Cosa significa: ___
3) Se vuoi, ti mando una mini guida su ___.
Rispondi 'SI' e te la giro üôÇ"`,
        mind: ["Informare ‚â† vendere. Valore = fiducia."],
        prep: ["Template fisso, 1 grafico/3 bullet, link pronti."],
        avoid: ["Promo aggressive.", "Messaggi lunghi a muro.", "Invii troppo frequenti."],
        goal: ["Restare presente con valore e autorevolezza."]
      },

      {
        time: "Settimanale",
        color: "var(--green)",
        title: "üîÅ RECIPROCITA' ‚Äì Dai business (presentazioni 1:1)",
        tags: ["Reciprocita'", "COI", "Professionisti"],
        meta: "2‚Äì5 presentazioni utili",
        do: [
          "Scegli 2 professionisti in rubrica (artigiano, mutui, notaio, interior, ecc.).",
          "Fai 1 presentazione utile a settimana (A‚ÜîB).",
          "Quando puoi, sponsorizza un professionista in broadcast (con valore)."
        ],
        say: `Presentazione WhatsApp:
"Ciao [A], ti presento [B].
[A] sta cercando [bisogno]. [B] e' molto bravo/a su questo.
Vi lascio qui cosi' vi sentite."`,
        mind: ["Diventa coltivatore: dare ‚Üí fiducia ‚Üí opportunita'."],
        prep: ["Lista COI (10 nomi) con competenza e zona."],
        avoid: ["Chiedere favori senza aver mai dato.", "Presentazioni a caso."],
        goal: ["Costruire rete che ti restituisce nel tempo."]
      },

      {
        time: "Compleanni",
        color: "var(--accent)",
        title: "üéÅ WOW ‚Äì Compleanni clienti (ROI altissimo)",
        tags: ["Fidelizzazione", "Referral", "Cliente passato"],
        meta: "Automazione/programma",
        do: [
          "Seleziona clienti top (rating A/B).",
          "Invia regalo (es. bottiglia + biglietto scritto a mano) tramite servizio esterno.",
          "Segna nel CRM: data invio + reazione + prossimo contatto."
        ],
        say: `Biglietto (umano, zero vendita):
"Caro/a [Nome], auguri di cuore! üéâ
Sono felice di averti conosciuto/a.
Se ti serve qualsiasi cosa legata a casa o zona, ci sono.
Un abbraccio, [Firma]"`,
        mind: ["Investire su chi ti conosce e' il marketing col miglior ROI."],
        prep: ["Lista compleanni, indirizzi, budget, testo biglietti."],
        avoid: ["Farne troppi senza criterio.", "Messaggi freddi/copincolla."],
        goal: ["Lasciare un segno e aumentare referral nel tempo."]
      },

      {
        time: "Prima di uscire",
        color: "var(--purple)",
        title: "‚úÖ CHECKLIST OFFLINE ‚Äì Prima di uscire di casa",
        tags: ["Checklist", "Offline"],
        meta: "30 secondi",
        do: [
          "Biglietti da visita.",
          "Script 15 secondi pronto.",
          "Note/CRM: dove segno nomi e dettagli.",
          "Obiettivo: 5 conversazioni + 2 contatti."
        ],
        say: "\"Oggi mi faccio ricordare per chiarezza e gentilezza.\"",
        mind: ["Micro-azioni costanti battono colpi di fortuna."],
        prep: ["Biglietti, volantino, penna, telefono carico."],
        avoid: ["Uscire \"a caso\" senza obiettivo."],
        goal: ["Entrare nel territorio con metodo."]
      },

      {
        time: "Prima di inviare",
        color: "var(--purple)",
        title: "‚úÖ CHECKLIST ONLINE ‚Äì Prima di inviare un messaggio",
        tags: ["Checklist", "Online", "No spam"],
        meta: "20 secondi",
        do: [
          "Sto dando valore o sto vendendo?",
          "E' leggibile in 20 secondi?",
          "C'e' una call-to-action soft (non aggressiva)?",
          "Ho il consenso per la lista?"
        ],
        say: "CTA soft: \"Vuoi che te lo spiego sul tuo caso?\"",
        mind: ["Valore ‚Üí fiducia ‚Üí contatti che arrivano da soli."],
        prep: ["Template messaggi, link, 3 bullet massimo."],
        avoid: ["Muri di testo.", "Invii troppo frequenti.", "Pressione/urgenza finta."],
        goal: ["Comunicare in modo utile, non invasivo."]
      }
    ];

    const rowsEl = document.getElementById("rows");
    const searchEl = document.getElementById("search");
    const expandBtn = document.getElementById("expandAll");

    const backdrop = document.getElementById("backdrop");
    const closeBtn = document.getElementById("closeBtn");

    const mTitle = document.getElementById("mTitle");
    const mMeta = document.getElementById("mMeta");
    const mDo = document.getElementById("mDo");
    const mGoal = document.getElementById("mGoal");
    const mSay = document.getElementById("mSay");
    const mMind = document.getElementById("mMind");
    const mPrep = document.getElementById("mPrep");
    const mAvoid = document.getElementById("mAvoid");

    function li(text){
      const el = document.createElement("li");
      el.textContent = text;
      return el;
    }

    function openModal(item){
      mTitle.textContent = item.title;

      mMeta.innerHTML = "";
      const chips = [
        {label: `‚è∞ ${item.time}`},
        item.meta ? {label: `üìå ${item.meta}`} : null
      ].filter(Boolean);

      (item.tags || []).forEach(t => chips.push({label: `üè∑ ${t}`}));

      chips.forEach(c=>{
        const s = document.createElement("span");
        s.className = "tag";
        s.textContent = c.label;
        mMeta.appendChild(s);
      });

      mDo.innerHTML = ""; (item.do || []).forEach(x=> mDo.appendChild(li(x)));
      mGoal.innerHTML = ""; (item.goal || []).forEach(x=> mGoal.appendChild(li(x)));
      mMind.innerHTML = ""; (item.mind || []).forEach(x=> mMind.appendChild(li(x)));
      mPrep.innerHTML = ""; (item.prep || []).forEach(x=> mPrep.appendChild(li(x)));
      mAvoid.innerHTML = ""; (item.avoid || []).forEach(x=> mAvoid.appendChild(li(x)));
      mSay.textContent = item.say || "";

      backdrop.style.display = "flex";
      document.body.style.overflow = "hidden";
    }

    function closeModal(){
      backdrop.style.display = "none";
      document.body.style.overflow = "";
    }

    // default close handlers
    function setDefaultModalHandlers(){
      closeBtn.onclick = closeModal;
      backdrop.onclick = (e)=>{ if(e.target === backdrop) closeModal(); };
      window.onkeydown = (e)=>{ if(e.key === "Escape" && backdrop.style.display === "flex") closeModal(); };
    }

    setDefaultModalHandlers();

    function buildFilteredItems(){
      const q = (searchEl.value || "").trim().toLowerCase();
      return schedule.filter(item=>{
        if(!q) return true;
        const hay = [
          item.time, item.title, item.meta,
          ...(item.tags||[]),
          ...(item.do||[]),
          item.say || "",
          ...(item.mind||[]),
          ...(item.prep||[]),
          ...(item.avoid||[]),
          ...(item.goal||[])
        ].join(" ").toLowerCase();
        return hay.includes(q);
      });
    }

    function render(){
      rowsEl.innerHTML = "";
      const items = buildFilteredItems();

      items.forEach((item)=>{
        const row = document.createElement("div");
        row.className = "row";

        const time = document.createElement("div");
        time.className = "time";
        time.textContent = item.time;

        const slot = document.createElement("div");
        slot.className = "slot";

        const block = document.createElement("div");
        block.className = "block";
        block.style.borderLeftColor = item.color || "var(--accent)";

        const t = document.createElement("div");
        t.className = "blockTitle";
        t.textContent = item.title;

        const meta = document.createElement("div");
        meta.className = "blockMeta";

        if(item.meta){
          const s = document.createElement("span");
          s.className = "tag";
          s.textContent = item.meta;
          meta.appendChild(s);
        }
        (item.tags||[]).slice(0,4).forEach(tag=>{
          const s = document.createElement("span");
          s.className = "tag";
          s.textContent = tag;
          meta.appendChild(s);
        });

        block.appendChild(t);
        block.appendChild(meta);
        block.addEventListener("click", ()=> openModal(item));

        slot.appendChild(block);
        row.appendChild(time);
        row.appendChild(slot);
        rowsEl.appendChild(row);
      });

      if(items.length === 0){
        const empty = document.createElement("div");
        empty.style.padding = "18px";
        empty.style.color = "var(--muted)";
        empty.textContent = "Nessun risultato. Prova a cercare 'Open', 'WhatsApp', 'script', 'CRM'...";
        rowsEl.appendChild(empty);
      }
    }

    searchEl.addEventListener("input", render);

    // Apri sequenza: apre modali uno dopo l'altro
    expandBtn.addEventListener("click", ()=>{
      const items = buildFilteredItems();
      if(!items.length) return;

      let i = 0;
      openModal(items[i]);

      const chainedClose = ()=>{
        closeModal();
        i++;
        if(i < items.length){
          setTimeout(()=> openModal(items[i]), 120);
        }else{
          // ripristina i handler normali
          setDefaultModalHandlers();
        }
      };

      // override temporaneo
      closeBtn.onclick = chainedClose;
      backdrop.onclick = (e)=>{ if(e.target === backdrop) chainedClose(); };
      window.onkeydown = (e)=>{ if(e.key === "Escape" && backdrop.style.display === "flex") chainedClose(); };
    });

    render();
  </script>
</body>
</html>
