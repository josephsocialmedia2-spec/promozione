// Mod<!DOCTYPE html>
<html lang="it" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="viewport-fit=cover">
  
  <!-- SEO Meta Tags -->
  <title>Video Creator ‚Äì Teleprompter Immobiliare</title>
  <meta name="description" content="Dashboard professionale per creare video immobiliari con teleprompter integrato. Genera contenuti per TikTok, Instagram, Reels in formato 9:16.">
  <meta name="keywords" content="video immobiliare, teleprompter, real estate, social media, content creation">
  <meta name="author" content="Video Creator">
  <meta name="robots" content="index, follow">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Video Creator ‚Äì Teleprompter Immobiliare">
  <meta property="og:description" content="Crea video professionali per il settore immobiliare con teleprompter integrato e AI.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://tuo-dominio.com/og-image.jpg">
  <meta property="og:url" content="https://tuo-dominio.com/video-creator">
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé¨</text></svg>">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé¨</text></svg>">
  
  <!-- CSS esterno (qui mantenuto inline per portabilit√†) -->
  <style>
    /* === RESET & BASE === */
    :root {
      --bg: #000000;
      --text: #f3f4f6;
      --muted: #b8c2cc; /* Migliorato contrasto: 5.7:1 su nero */
      --gold: #ffd700;
      --gold-dark: #ccac00;
      --border: rgba(255, 255, 255, 0.15);
      --border-focus: rgba(255, 215, 0, 0.55);
      --shadow: 0 14px 50px rgba(0, 0, 0, 0.55);
      --radius: 18px;
      --radius-sm: 12px;
      --sans: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      
      --tele-font: 12px;
      --tele-line: 1.22;
      --stage-w: min(420px, 92vw);
      --zoom: 1;
      
      /* Spacing system */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 12px;
      --space-lg: 16px;
      --space-xl: 24px;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    html {
      font-size: 16px;
      -webkit-text-size-adjust: 100%;
      scroll-behavior: smooth;
    }
    
    body {
      font-family: var(--sans);
      color: var(--text);
      background: var(--bg);
      min-height: 100vh;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* === ACCESSIBILITY === */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
    
    [aria-hidden="true"] {
      display: none;
    }
    
    /* === FOCUS MANAGEMENT === */
    :focus-visible {
      outline: 2px solid var(--gold);
      outline-offset: 2px;
    }
    
    .btn:focus-visible,
    input:focus-visible,
    textarea:focus-visible,
    select:focus-visible {
      border-color: var(--border-focus);
      box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.15);
    }
    
    /* === LAYOUT === */
    .wrap {
      max-width: 1150px;
      margin: 0 auto;
      padding: var(--space-md) var(--space-sm) 84px;
    }
    
    /* === TYPOGRAPHY === */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 800;
      line-height: 1.2;
    }
    
    .h {
      margin: 0 0 var(--space-sm);
      font-size: 10px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.8px;
      font-weight: 950;
    }
    
    /* === BUTTONS === */
    .btn {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.06);
      color: var(--text);
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-weight: 950;
      letter-spacing: 0.2px;
      font-size: 11px;
      line-height: 1;
      white-space: nowrap;
      text-decoration: none;
      user-select: none;
      transform: translateY(0) scale(1);
      transition: all 0.14s ease;
      box-shadow: var(--shadow);
      overflow: hidden;
      min-height: 32px;
    }
    
    @media (max-width: 768px) {
      .btn {
        min-height: 44px;
        min-width: 44px;
        padding: 12px 16px;
      }
    }
    
    /* Button states */
    .btn:hover:not(:disabled) {
      transform: translateY(-2px) scale(1.01);
      border-color: rgba(255, 215, 0, 0.35);
      box-shadow: 0 14px 34px rgba(0, 0, 0, 0.4);
      filter: brightness(1.1);
    }
    
    .btn:active:not(:disabled) {
      transform: translateY(0) scale(0.99);
      filter: brightness(0.98);
    }
    
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }
    
    /* Button variants */
    .btn.primary {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.95), rgba(255, 215, 0, 0.75));
      color: #000;
      border-color: rgba(255, 215, 0, 0.55);
    }
    
    .btn.question-btn {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.95), rgba(255, 215, 0, 0.75));
      color: #000;
      border-color: rgba(255, 215, 0, 0.55);
    }
    
    .btn.rec {
      background: linear-gradient(135deg, rgba(255, 45, 45, 0.95), rgba(255, 45, 45, 0.55));
      border-color: rgba(255, 45, 45, 0.55);
      color: #120707;
    }
    
    .btn.whatsapp {
      background: linear-gradient(135deg, #25D366, #128C7E);
      color: white;
      border-color: rgba(37, 211, 102, 0.6);
    }
    
    /* === FORMS === */
    .field {
      margin-bottom: var(--space-md);
    }
    
    .field label {
      display: block;
      margin-bottom: var(--space-xs);
      font-size: 11px;
      font-weight: 700;
      color: var(--muted);
    }
    
    .field input,
    .field select,
    .field textarea {
      width: 100%;
      padding: var(--space-md);
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: rgba(0, 0, 0, 0.25);
      color: var(--text);
      font-family: var(--sans);
      font-size: 12px;
      font-weight: 600;
      transition: all 0.2s ease;
    }
    
    .field textarea {
      min-height: 120px;
      resize: vertical;
      line-height: 1.4;
    }
    
    @media (max-width: 768px) {
      .field input,
      .field select,
      .field textarea {
        font-size: 16px; /* Previene zoom automatico iOS */
      }
    }
    
    /* === GRID SYSTEM === */
    .grid2 {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-sm);
    }
    
    @media (max-width: 480px) {
      .grid2 {
        grid-template-columns: 1fr;
      }
    }
    
    .layout {
      display: grid;
      grid-template-columns: 1fr 360px;
      gap: var(--space-md);
      margin-top: var(--space-md);
    }
    
    @media (max-width: 1024px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }
    
    /* === CARD COMPONENT === */
    .card {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.02));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    
    .section {
      padding: var(--space-md);
    }
    
    .section + .section {
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    /* === STAGE & VIDEO === */
    #stage916 {
      width: 100%;
      aspect-ratio: 9 / 16;
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: var(--radius);
      overflow: hidden;
      position: relative;
      background: #000;
      box-shadow: var(--shadow);
    }
    
    #cam {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(var(--zoom));
      transform-origin: center;
    }
    
    /* === MODAL === */
    .modalBackdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(10px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: var(--space-md);
    }
    
    .modalBackdrop.show {
      display: flex;
    }
    
    .modalCard {
      width: min(920px, 96vw);
      max-height: min(82vh, 780px);
      overflow: auto;
      border-radius: var(--radius);
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.07), rgba(0, 0, 0, 0.3));
      box-shadow: 0 20px 80px rgba(0, 0, 0, 0.65);
    }
    
    /* === UTILITY CLASSES === */
    .pill {
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      padding: 6px 10px;
      border: 1px solid var(--border);
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.25);
      font-size: 10px;
      font-weight: 900;
      color: var(--muted);
      letter-spacing: 0.2px;
      white-space: nowrap;
    }
    
    .subtle {
      font-size: 11px;
      color: var(--muted);
      line-height: 1.35;
      margin-top: var(--space-sm);
    }
    
    /* === ANIMATIONS === */
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255, 45, 45, 0.45); }
      70% { box-shadow: 0 0 0 10px rgba(255, 45, 45, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 45, 45, 0); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* === LOADING STATES === */
    .loading {
      position: relative;
      pointer-events: none;
      opacity: 0.7;
    }
    
    .loading::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 16px;
      height: 16px;
      margin: -8px 0 0 -8px;
      border: 2px solid var(--border);
      border-top-color: var(--gold);
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* === PRINT STYLES === */
    @media print {
      .no-print {
        display: none !important;
      }
      
      body {
        background: white;
        color: black;
      }
      
      .card {
        border: 1px solid #ddd;
        box-shadow: none;
      }
    }
  </style>
  
  <!-- JavaScript ottimizzato (solo parte critica iniziale) -->
  <script>
    // Critical JS loaded inline
    window.APP_CONFIG = {
      GESTIONALE_URL: "https://tuo-gestionale.com",
      CHATGPT_URL: "https://chatgpt.com/c/69528e47-0920-8331-8d43-59824e8a9c54",
      WHATSAPP_NUMBER: "+393713708294",
      UNLOCK_CODE: "16091979Jm",
      VERSION: "2.1.0"
    };
    
    // Feature detection
    window.supports = {
      mediaRecorder: typeof MediaRecorder !== 'undefined',
      clipboard: navigator.clipboard && typeof navigator.clipboard.writeText === 'function',
      webRTC: navigator.mediaDevices && typeof navigator.mediaDevices.getUserMedia === 'function',
      cssGrid: CSS.supports('display', 'grid'),
      focusVisible: CSS.supports('selector(:focus-visible)')
    };
    
    // Load non-critical JS deferred
    function loadAppScript() {
      const script = document.createElement('script');
      script.src = 'app.js'; // File esterno
      script.defer = true;
      script.crossOrigin = 'anonymous';
      document.head.appendChild(script);
    }
    
    // Load after DOM ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadAppScript);
    } else {
      loadAppScript();
    }
  </script>
</head>

<body>
  <!-- Screen reader announcements -->
  <div id="sr-announcer" class="sr-only" aria-live="polite" aria-atomic="true"></div>
  
  <!-- Skip to main content -->
  <a href="#main-content" class="sr-only sr-only-focusable">Salta al contenuto principale</a>
  
  <div class="wrap">
    <!-- Header con navigazione principale -->
    <header role="banner">
      <div class="row" style="flex:1;">
        <button class="btn question-btn" id="btnNext" type="button" aria-label="Genera una nuova domanda">
          <span class="ico" aria-hidden="true">‚ú®</span> Nuova domanda
        </button>
        
        <!-- Altri bottoni con attributi ARIA... -->
      </div>
    </header>
    
    <!-- Contenuto principale -->
    <main id="main-content" role="main">
      <!-- Sezioni esistenti con miglioramenti semantici... -->
    </main>
    
    <!-- Footer -->
    <footer class="bottomBar" role="contentinfo">
      <button class="btn tiny gray" id="btnBackBottom" type="button" aria-label="Torna al gestionale">
        ‚Üê Gestionale
      </button>
    </footer>
  </div>
  
  <!-- Modal istruzioni -->
  <div class="modalBackdrop" id="instructionsModal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="instructionsTitle">
    <!-- Contenuto modal... -->
  </div>
  
  <!-- Load non-critical CSS -->
  <link rel="stylesheet" href="styles.css" media="print" onload="this.media='all'">
  <noscript>
    <link rel="stylesheet" href="styles.css">
  </noscript>
</body>
</html>uli separati:
// 1. camera.js - Gestione webcam e recording
// 2. teleprompter.js - Scroll e controlli
// 3. storage.js - LocalStorage e IndexedDB
// 4. ui.js - Gestione interfaccia
// 5. export.js - Download e condivisione
