<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Teleprompter Immobili</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #0f172a;
            color: #f1f5f9;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #1e293b;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: #60a5fa;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .funcionario-info {
            background: #3b82f6;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .funcionario-info .number {
            font-weight: 700;
            background: white;
            color: #3b82f6;
            padding: 2px 8px;
            border-radius: 10px;
        }
        
        .main-container {
            display: flex;
            gap: 20px;
            flex: 1;
        }
        
        .controls {
            width: 350px;
            background: #1e293b;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        .video-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .video-preview {
            background: #1e293b;
            border-radius: 12px;
            padding: 20px;
            flex: 1;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        .teleprompter-section {
            background: #1e293b;
            border-radius: 12px;
            padding: 20px;
            height: 300px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #94a3b8;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            font-size: 14px;
            color: #cbd5e1;
            margin-bottom: 5px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid #334155;
            background: #0f172a;
            color: #f1f5f9;
            font-size: 14px;
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
            font-family: monospace;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3b82f6;
        }
        
        .btn {
            padding: 12px 20px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
        }
        
        .btn-secondary {
            background: #475569;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #64748b;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
        }
        
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        
        .btn-danger:hover {
            background: #dc2626;
        }
        
        .buttons-row {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .caption-container {
            background: #0f172a;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            border: 1px solid #334155;
            min-height: 150px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .caption-text {
            white-space: pre-line;
            font-size: 14px;
            line-height: 1.5;
            color: #cbd5e1;
        }
        
        /* VIDEO PREVIEW STYLES */
        .video-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            z-index: 10;
        }
        
        .social-widget {
            display: flex;
            gap: 20px;
            background: rgba(15, 23, 42, 0.9);
            padding: 15px;
            border-radius: 12px;
            backdrop-filter: blur(5px);
        }
        
        .social-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .social-button:hover {
            transform: scale(1.1);
        }
        
        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .like-icon {
            background: #ef4444;
            color: white;
        }
        
        .share-icon {
            background: #3b82f6;
            color: white;
        }
        
        .call-icon {
            background: #10b981;
            color: white;
        }
        
        .social-text {
            font-size: 12px;
            color: #cbd5e1;
        }
        
        .animated-dots {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            background: rgba(15, 23, 42, 0.9);
            padding: 15px;
            border-radius: 12px;
            backdrop-filter: blur(5px);
        }
        
        .dots-container {
            display: flex;
            gap: 8px;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #3b82f6;
            animation: pulse 1.5s infinite;
        }
        
        .dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        .dot:nth-child(4) {
            animation-delay: 0.6s;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .timer-display {
            font-size: 32px;
            font-weight: 700;
            color: white;
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.8);
            margin-top: 10px;
        }
        
        .property-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(15, 23, 42, 0.95);
            padding: 15px;
            border-radius: 12px;
            backdrop-filter: blur(5px);
            border: 2px solid #3b82f6;
            max-width: 300px;
        }
        
        .property-title {
            font-size: 20px;
            font-weight: 700;
            color: #60a5fa;
            margin-bottom: 5px;
        }
        
        .property-price {
            font-size: 24px;
            font-weight: 800;
            color: #10b981;
            margin-bottom: 10px;
        }
        
        .property-type {
            font-size: 16px;
            color: #cbd5e1;
            margin-bottom: 10px;
            padding: 5px 10px;
            background: rgba(59, 130, 246, 0.2);
            border-radius: 6px;
            display: inline-block;
        }
        
        .camera-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #3b82f6;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.4);
            transition: all 0.2s;
            z-index: 20;
        }
        
        .camera-button:hover {
            background: #2563eb;
            transform: scale(1.05);
        }
        
        .recording-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(239, 68, 68, 0.9);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }
        
        .rec-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: white;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .caption-display {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.9);
            padding: 10px 0;
            overflow: hidden;
            border-top: 2px solid #3b82f6;
        }
        
        .caption-scroll {
            display: flex;
            white-space: nowrap;
            animation: scrollCaption 30s linear infinite;
            padding: 5px 0;
        }
        
        @keyframes scrollCaption {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        .caption-item {
            display: inline-block;
            padding: 0 30px;
            font-size: 18px;
            font-weight: 500;
            color: #3b82f6;
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        
        /* TELEPROMPTER STYLES */
        .teleprompter-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .teleprompter-textarea {
            flex: 1;
            background: #0f172a;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #334155;
            font-size: 16px;
            line-height: 1.6;
            color: #f1f5f9;
            resize: none;
            min-height: 150px;
        }
        
        .teleprompter-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-height: 70%;
            overflow-y: auto;
            padding: 30px;
            background: rgba(15, 23, 42, 0.95);
            border-radius: 12px;
            border: 3px solid #3b82f6;
            font-size: 28px;
            line-height: 1.8;
            text-align: center;
            color: #f1f5f9;
            backdrop-filter: blur(10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.7);
            z-index: 100;
        }
        
        .teleprompter-display h3 {
            color: #60a5fa;
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        .hidden {
            display: none !important;
        }
        
        .status-bar {
            margin-top: 20px;
            padding: 12px;
            background: #1e293b;
            border-radius: 8px;
            font-size: 14px;
            color: #94a3b8;
            text-align: center;
        }
        
        .controls-footer {
            margin-top: auto;
            padding-top: 15px;
            border-top: 1px solid #334155;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="header">
        <div class="logo">
            <i class="fas fa-home"></i>
            RealEstate Teleprompter
        </div>
        <div class="funcionario-info">
            <i class="fas fa-user-tie"></i>
            Funzionario: <span class="number">+39 333 123 4567</span>
        </div>
    </div>
    
    <div class="main-container">
        <div class="controls">
            <div>
                <div class="section-title">
                    <i class="fas fa-building"></i>
                    DATI IMMOBILE
                </div>
                
                <div class="form-group">
                    <label for="propertyName">Nome visualizzato</label>
                    <input type="text" id="propertyName" placeholder="Es: Trilocale Luminoso">
                </div>
                
                <div class="buttons-row">
                    <div class="form-group" style="flex:1">
                        <label for="propertyType">Tipologia</label>
                        <select id="propertyType">
                            <option value="appartamento">Appartamento</option>
                            <option value="villetta">Villetta</option>
                            <option value="attico">Attico</option>
                            <option value="loft">Loft</option>
                            <option value="studio">Studio</option>
                        </select>
                    </div>
                    
                    <div class="form-group" style="flex:1">
                        <label for="propertyPrice">Prezzo (‚Ç¨)</label>
                        <input type="number" id="propertyPrice" placeholder="250000">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="propertySize">Metri Quadri (mq)</label>
                    <input type="number" id="propertySize" placeholder="Es: 85">
                </div>
                
                <div class="form-group">
                    <label for="propertyFloor">Piano</label>
                    <input type="text" id="propertyFloor" placeholder="Es: 2¬∞ / rialzato / terra">
                </div>
                
                <div class="form-group">
                    <label for="propertyRooms">Locali</label>
                    <input type="text" id="propertyRooms" placeholder="Es: 3 / bilocale / trilocale">
                </div>
                
                <div class="form-group">
                    <label for="propertyBathrooms">Bagno/i</label>
                    <input type="text" id="propertyBathrooms" placeholder="Es: 1 / 2 / 1 finestrato">
                </div>
                
                <button class="btn btn-primary" id="generateCaption">
                    <i class="fas fa-sync-alt"></i> Genera Caption
                </button>
            </div>
            
            <div class="caption-container">
                <div class="section-title">
                    <i class="fas fa-align-left"></i>
                    CAPTION GENERATA
                </div>
                <div class="caption-text" id="captionOutput"></div>
            </div>
            
            <div class="buttons-row">
                <button class="btn btn-secondary" id="copyCaption">
                    <i class="far fa-copy"></i> Copia Caption
                </button>
                <button class="btn btn-success" id="newQuestion">
                    <i class="fas fa-question-circle"></i> Nuova Domanda
                </button>
            </div>
            
            <div class="controls-footer">
                <button class="btn btn-danger" id="startTeleprompter">
                    <i class="fas fa-play"></i> Teleprompter + REC (120s)
                </button>
            </div>
        </div>
        
        <div class="video-section">
            <div class="video-preview" id="videoPreview">
                <!-- Animated Dots e Timer -->
                <div class="animated-dots">
                    <div class="dots-container">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                    <div class="timer-display" id="timerDisplay">02:00</div>
                </div>
                
                <!-- Social Widget -->
                <div class="social-widget">
                    <div class="social-button" id="likeButton">
                        <div class="social-icon like-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="social-text">Metti Like</div>
                    </div>
                    
                    <div class="social-button" id="shareButton">
                        <div class="social-icon share-icon">
                            <i class="fas fa-share-alt"></i>
                        </div>
                        <div class="social-text">Condividi</div>
                    </div>
                    
                    <div class="social-button" id="callButton">
                        <div class="social-icon call-icon">
                            <i class="fas fa-phone-alt"></i>
                        </div>
                        <div class="social-text">Chiamami</div>
                    </div>
                </div>
                
                <!-- Property Info -->
                <div class="property-info">
                    <div class="property-title" id="displayPropertyName">Trilocale Luminoso</div>
                    <div class="property-price" id="displayPropertyPrice">‚Ç¨ 250.000</div>
                    <div class="property-type" id="displayPropertyType">Appartamento</div>
                </div>
                
                <!-- Camera Button -->
                <div class="camera-button" id="cameraButton">
                    <i class="fas fa-camera"></i>
                </div>
                
                <!-- Recording Indicator -->
                <div class="recording-indicator hidden" id="recordingIndicator">
                    <div class="rec-dot"></div>
                    <span>REC</span>
                </div>
                
                <!-- Scrolling Caption -->
                <div class="caption-display">
                    <div class="caption-scroll" id="captionScroll">
                        <!-- La caption scorrer√† qui -->
                    </div>
                </div>
                
                <!-- Teleprompter Display -->
                <div class="teleprompter-display hidden" id="teleprompterDisplay">
                    <!-- Il testo del teleprompter apparir√† qui -->
                </div>
            </div>
            
            <div class="teleprompter-section">
                <div class="section-title">
                    <i class="fas fa-scroll"></i>
                    TELEPROMPTER
                </div>
                <div class="teleprompter-controls">
                    <button class="btn btn-secondary" id="pasteAnswer">
                        <i class="fas fa-paste"></i> Incolla Risposta
                    </button>
                    <button class="btn btn-primary" id="showTeleprompter">
                        <i class="fas fa-eye"></i> Mostra Teleprompter
                    </button>
                </div>
                <textarea class="teleprompter-textarea" id="teleprompterTextarea" placeholder="Incolla qui la risposta da ChatGPT o scrivi manualmente..."></textarea>
            </div>
        </div>
    </div>
    
    <div class="status-bar" id="statusBar">
        Sistema pronto. Inserisci i dati dell'immobile e genera la caption.
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementi DOM
            const generateCaptionBtn = document.getElementById('generateCaption');
            const copyCaptionBtn = document.getElementById('copyCaption');
            const newQuestionBtn = document.getElementById('newQuestion');
            const startTeleprompterBtn = document.getElementById('startTeleprompter');
            const pasteAnswerBtn = document.getElementById('pasteAnswer');
            const showTeleprompterBtn = document.getElementById('showTeleprompter');
            const captionOutput = document.getElementById('captionOutput');
            const captionScroll = document.getElementById('captionScroll');
            const teleprompterTextarea = document.getElementById('teleprompterTextarea');
            const teleprompterDisplay = document.getElementById('teleprompterDisplay');
            const statusBar = document.getElementById('statusBar');
            const timerDisplay = document.getElementById('timerDisplay');
            const recordingIndicator = document.getElementById('recordingIndicator');
            const cameraButton = document.getElementById('cameraButton');
            
            // Elementi per i dati dell'immobile
            const propertyNameInput = document.getElementById('propertyName');
            const propertyTypeInput = document.getElementById('propertyType');
            const propertyPriceInput = document.getElementById('propertyPrice');
            const propertySizeInput = document.getElementById('propertySize');
            const propertyFloorInput = document.getElementById('propertyFloor');
            const propertyRoomsInput = document.getElementById('propertyRooms');
            const propertyBathroomsInput = document.getElementById('propertyBathrooms');
            
            // Elementi per la visualizzazione nel video
            const displayPropertyName = document.getElementById('displayPropertyName');
            const displayPropertyPrice = document.getElementById('displayPropertyPrice');
            const displayPropertyType = document.getElementById('displayPropertyType');
            
            // Variabili di stato
            let isRecording = false;
            let timerInterval = null;
            let timeLeft = 120; // 120 secondi = 2 minuti
            
            // Aggiorna la visualizzazione dell'immobile nel video
            function updatePropertyDisplay() {
                if (propertyNameInput.value) {
                    displayPropertyName.textContent = propertyNameInput.value;
                }
                
                if (propertyPriceInput.value) {
                    const price = parseInt(propertyPriceInput.value).toLocaleString('it-IT');
                    displayPropertyPrice.textContent = `‚Ç¨ ${price}`;
                }
                
                if (propertyTypeInput.value) {
                    // Capitalizza la prima lettera
                    const type = propertyTypeInput.value;
                    displayPropertyType.textContent = type.charAt(0).toUpperCase() + type.slice(1);
                }
            }
            
            // Aggiorna i campi dell'immobile quando cambiano
            propertyNameInput.addEventListener('input', updatePropertyDisplay);
            propertyPriceInput.addEventListener('input', updatePropertyDisplay);
            propertyTypeInput.addEventListener('change', updatePropertyDisplay);
            
            // Genera la caption
            generateCaptionBtn.addEventListener('click', function() {
                // Ottieni i valori dai campi
                const propertyName = propertyNameInput.value || "Immobile di prestigio";
                const propertyType = propertyTypeInput.value ? 
                    propertyTypeInput.options[propertyTypeInput.selectedIndex].text : "Appartamento";
                const propertyPrice = propertyPriceInput.value ? 
                    `‚Ç¨ ${parseInt(propertyPriceInput.value).toLocaleString('it-IT')}` : "Prezzo su richiesta";
                const propertySize = propertySizeInput.value ? `${propertySizeInput.value} mq` : "Metratura da definire";
                const propertyFloor = propertyFloorInput.value || "Piano da definire";
                const propertyRooms = propertyRoomsInput.value || "Locali da definire";
                const propertyBathrooms = propertyBathroomsInput.value || "Bagno/i da definire";
                
                // Crea la caption
                const caption = `üè† ${propertyName} | ${propertyType} | ${propertyPrice}
üìç ${propertySize} | ${propertyRooms} | ${propertyBathrooms}
üè¢ Piano: ${propertyFloor}
üìû Contatta il funzionario: +39 333 123 4567`;
                
                // Mostra la caption nell'area di testo
                captionOutput.textContent = caption;
                
                // Prepara la caption per lo scorrimento orizzontale
                const scrollCaption = caption.replace(/\n/g, ' | ');
                captionScroll.innerHTML = '';
                
                // Aggiungi la caption come elemento scorrevole (ripetuta per effetto continuo)
                for (let i = 0; i < 3; i++) {
                    const captionItem = document.createElement('div');
                    captionItem.className = 'caption-item';
                    captionItem.textContent = scrollCaption;
                    captionScroll.appendChild(captionItem);
                }
                
                // Aggiorna la visualizzazione nel video
                updatePropertyDisplay();
                
                // Aggiorna lo status
                statusBar.textContent = "Caption generata con successo!";
                statusBar.style.color = "#10b981";
                
                // Mostra il tasto per copiare
                copyCaptionBtn.classList.remove('hidden');
            });
            
            // Copia la caption negli appunti
            copyCaptionBtn.addEventListener('click', function() {
                const caption = captionOutput.textContent;
                
                if (caption && caption.trim() !== '') {
                    navigator.clipboard.writeText(caption)
                        .then(() => {
                            statusBar.textContent = "Caption copiata negli appunti!";
                            statusBar.style.color = "#3b82f6";
                            
                            // Feedback visivo
                            copyCaptionBtn.innerHTML = '<i class="fas fa-check"></i> Copiato!';
                            setTimeout(() => {
                                copyCaptionBtn.innerHTML = '<i class="far fa-copy"></i> Copia Caption';
                            }, 2000);
                        })
                        .catch(err => {
                            console.error('Errore nella copia:', err);
                            statusBar.textContent = "Errore nella copia della caption";
                            statusBar.style.color = "#ef4444";
                        });
                }
            });
            
            // Nuova domanda (simula ChatGPT)
            newQuestionBtn.addEventListener('click', function() {
                // Simula una domanda da ChatGPT
                const questions = [
                    "Puoi descrivermi le caratteristiche principali di questo immobile?",
                    "Quali sono i vantaggi dell'ubicazione di questa propriet√†?",
                    "Come si presenta lo stato di manutenzione dell'appartamento?",
                    "√à possibile visitare l'immobile questa settimana?",
                    "Quali sono le spese condominiali mensili?",
                    "L'immobile √® adatto a una famiglia con bambini?",
                    "Ci sono agevolazioni per i primi acquirenti?",
                    "Qual √® la storia di questa propriet√†?",
                    "Sono inclusi gli elettrodomestici nella vendita?",
                    "Quali interventi di manutenzione sono stati effettuati recentemente?"
                ];
                
                const randomQuestion = questions[Math.floor(Math.random() * questions.length)];
                
                // Inserisci la domanda nel teleprompter
                teleprompterTextarea.value = `DOMANDA: ${randomQuestion}\n\nRISPOSTA: `;
                
                // Focus sul teleprompter
                teleprompterTextarea.focus();
                
                statusBar.textContent = "Nuova domanda generata. Incolla la risposta nel teleprompter.";
                statusBar.style.color = "#8b5cf6";
            });
            
            // Incolla risposta (simula incolla da ChatGPT)
            pasteAnswerBtn.addEventListener('click', function() {
                // Simula una risposta da ChatGPT
                const answers = [
                    "Questo immobile presenta numerosi vantaggi tra cui una posizione centrale, luminosit√† ottimale grazie all'esposizione sud e uno stato di manutenzione eccellente. Recentemente ristrutturato con materiali di alta qualit√†.",
                    "La propriet√† si trova in una zona residenziale molto tranquilla, a soli 10 minuti a piedi dal centro citt√†. Servita da mezzi pubblici e vicina a scuole, supermercati e parchi.",
                    "L'appartamento √® in ottime condizioni, con impianti elettrici e idraulici completamente rifatti nel 2022. Le finiture sono di pregio con parquet in rovere massello e infissi a taglio termico.",
                    "Certamente! Possiamo organizzare una visita per gioved√¨ o venerd√¨ pomeriggio. Mi pu√≤ confermare quale giorno preferisce?",
                    "Le spese condominiali ammontano a ‚Ç¨ 120 mensili e includono riscaldamento centralizzato, pulizia scale, manutenzione dell'ascensore e illuminazione comune.",
                    "Assolutamente s√¨. La zona √® sicura e silenziosa, con un parco giochi a 200 metri e scuole elementari nelle vicinanze. L'appartamento stesso ha una pianta molto funzionale per una famiglia.",
                    "S√¨, per i primi acquirenti under 36 √® possibile accedere al mutuo giovane con agevolazioni fiscali e l'esenzione dall'imposta di registro per il 50% del valore.",
                    "La propriet√† √® stata costruita nel 2015 da un noto costruttore locale. L'attuale proprietario l'ha acquistata nel 2018 e l'ha mantenuta in condizioni impeccabili.",
                    "Nella vendita sono inclusi cucina componibile con elettrodomestici (frigorifero, forno, piano cottura), climatizzatori in ogni stanza e tutte le tende oscuranti.",
                    "Negli ultimi 2 anni sono stati sostituiti il boiler, installati i condizionatori in ogni ambiente, e rifatta la pittura completa di tutti gli interni."
                ];
                
                const randomAnswer = answers[Math.floor(Math.random() * answers.length)];
                
                // Se c'√® gi√† del testo, aggiungi la risposta
                if (teleprompterTextarea.value.includes("RISPOSTA:")) {
                    teleprompterTextarea.value = teleprompterTextarea.value.split("RISPOSTA:")[0] + "RISPOSTA: " + randomAnswer;
                } else {
                    teleprompterTextarea.value += randomAnswer;
                }
                
                statusBar.textContent = "Risposta incollata nel teleprompter!";
                statusBar.style.color = "#10b981";
            });
            
            // Mostra il teleprompter nel video
            showTeleprompterBtn.addEventListener('click', function() {
                const text = teleprompterTextarea.value.trim();
                
                if (text) {
                    teleprompterDisplay.innerHTML = `<h3>TELEPROMPTER</h3><div>${text.replace(/\n/g, '<br>')}</div>`;
                    teleprompterDisplay.classList.remove('hidden');
                    
                    statusBar.textContent = "Teleprompter visibile sul video. Premi ESC per nasconderlo.";
                    statusBar.style.color = "#3b82f6";
                } else {
                    statusBar.textContent = "Il teleprompter √® vuoto! Inserisci prima del testo.";
                    statusBar.style.color = "#ef4444";
                }
            });
            
            // Nascondi teleprompter con ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    teleprompterDisplay.classList.add('hidden');
                }
            });
            
            // Timer per la registrazione
            function updateTimer() {
                timeLeft--;
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    stopRecording();
                }
            }
            
            // Avvia la registrazione
            function startRecording() {
                if (isRecording) return;
                
                isRecording = true;
                timeLeft = 120;
                
                // Mostra indicatori
                recordingIndicator.classList.remove('hidden');
                timerDisplay.textContent = "02:00";
                
                // Nascondi il teleprompter dopo 3 secondi
                setTimeout(() => {
                    teleprompterDisplay.classList.add('hidden');
                }, 3000);
                
                // Avvia il timer
                timerInterval = setInterval(updateTimer, 1000);
                
                // Aggiorna lo status
                statusBar.textContent = "Registrazione in corso... Timer di 120 secondi attivo";
                statusBar.style.color = "#ef4444";
            }
            
            // Ferma la registrazione
            function stopRecording() {
                if (!isRecording) return;
                
                isRecording = false;
                
                // Nascondi indicatori
                recordingIndicator.classList.add('hidden');
                
                // Ferma il timer
                if (timerInterval) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                }
                
                // Ripristina il timer
                timerDisplay.textContent = "02:00";
                
                // Aggiorna lo status
                statusBar.textContent = "Registrazione completata!";
                statusBar.style.color = "#10b981";
            }
            
            // Avvia il teleprompter e la registrazione
            startTeleprompterBtn.addEventListener('click', startRecording);
            
            // Bottone fotocamera
            cameraButton.addEventListener('click', function() {
                statusBar.textContent = "Foto scattata! (simulazione)";
                statusBar.style.color = "#3b82f6";
                
                // Feedback visivo
                cameraButton.innerHTML = '<i class="fas fa-check"></i>';
                cameraButton.style.background = "#10b981";
                
                setTimeout(() => {
                    cameraButton.innerHTML = '<i class="fas fa-camera"></i>';
                    cameraButton.style.background = "#3b82f6";
                }, 1500);
            });
            
            // Bottoni social (simulazione)
            document.getElementById('likeButton').addEventListener('click', function() {
                statusBar.textContent = "Like aggiunto! (simulazione)";
                statusBar.style.color = "#ef4444";
            });
            
            document.getElementById('shareButton').addEventListener('click', function() {
                statusBar.textContent = "Condivisione in corso... (simulazione)";
                statusBar.style.color = "#3b82f6";
            });
            
            document.getElementById('callButton').addEventListener('click', function() {
                statusBar.textContent = "Chiamata al funzionario +39 333 123 4567 (simulazione)";
                statusBar.style.color = "#10b981";
            });
            
            // Inizializza con dati di esempio
            propertyNameInput.value = "Trilocale Luminoso con Terrazzo";
            propertyTypeInput.value = "appartamento";
            propertyPriceInput.value = "250000";
            propertySizeInput.value = "85";
            propertyFloorInput.value = "2¬∞ piano";
            propertyRoomsInput.value = "3 locali";
            propertyBathroomsInput.value = "1 bagno finestrato";
            
            // Genera una caption iniziale
            setTimeout(() => {
                generateCaptionBtn.click();
            }, 500);
        });
    </script>
</body>
</html>
